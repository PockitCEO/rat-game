{"version":3,"sources":["../src/rspackPluginTevm.js"],"names":[],"mappings":";;;AA6IO,IAAM,gBAAA,GAAmB,cAAA,CAAe,YAAY,CAAA,CAAE","file":"index.js","sourcesContent":["import { createUnplugin, tevmUnplugin } from '@tevm/unplugin'\n\n/**\n * Creates an Rspack plugin for Tevm that enables direct Solidity imports in JavaScript\n * and TypeScript code.\n *\n * This plugin integrates with Rspack to transform imports of .sol files into JavaScript\n * modules that export Tevm Contract instances. These instances include the contract's ABI,\n * bytecode, and type information, allowing you to interact with Ethereum smart contracts\n * in a type-safe way directly from your JavaScript/TypeScript code.\n *\n * [Rspack](https://www.rspack.dev/) is a Rust-based JavaScript bundler that's highly\n * compatible with Webpack APIs but offers significantly better performance.\n *\n * @param config Plugin configuration options\n * @param [options.solc] - Solidity compiler version to use\n * @returns {import('rspack').RspackPluginInstance} - An Rspack plugin instance\n *\n * @example\n * #### Basic Rspack Configuration\n *\n * Add the plugin to your Rspack configuration:\n *\n * ```javascript\n * // rspack.config.js\n * const { rspackPluginTevm } = require('@tevm/rspack')\n *\n * module.exports = {\n *   entry: './src/index.js',\n *   output: {\n *     filename: 'bundle.js',\n *     path: __dirname + '/dist',\n *   },\n *   plugins: [\n *     rspackPluginTevm()\n *   ]\n * }\n * ```\n *\n * #### Rsbuild Configuration\n *\n * Works with Rsbuild as well:\n *\n * ```typescript\n * // rsbuild.config.ts\n * import { defineConfig } from '@rsbuild/core'\n * import { rspackPluginTevm } from '@tevm/rspack'\n *\n * export default defineConfig({\n *   tools: {\n *     rspack: {\n *       plugins: [rspackPluginTevm()]\n *     }\n *   }\n * })\n * ```\n *\n * #### TypeScript Configuration\n *\n * For full TypeScript support including editor integration (code completion, type checking),\n * add the Tevm TypeScript plugin to your tsconfig.json:\n *\n * ```json\n * {\n *   \"compilerOptions\": {\n *     \"plugins\": [{ \"name\": \"tevm/ts-plugin\" }]\n *   }\n * }\n * ```\n *\n * #### Using Imported Contracts\n *\n * Once configured, you can import Solidity files directly and use them with full type safety:\n *\n * ```typescript\n * // Import a Solidity contract directly\n * import { ERC20 } from '@openzeppelin/contracts/token/ERC20/ERC20.sol'\n * import { createMemoryClient } from 'tevm'\n *\n * // Access contract metadata\n * console.log('ABI:', ERC20.abi)\n * console.log('Human-readable ABI:', ERC20.humanReadableAbi)\n * console.log('Bytecode:', ERC20.bytecode)\n *\n * // Create a Tevm client\n * const client = createMemoryClient()\n *\n * // Deploy the contract\n * const deployedContract = await client.deployContract(ERC20, [\n *   \"Rspack Demo Token\",  // name\n *   \"RDT\"                 // symbol\n * ])\n *\n * // Call read methods with full type safety\n * const name = await deployedContract.read.name()\n * const symbol = await deployedContract.read.symbol()\n *\n * console.log(`Token: ${name} (${symbol})`)\n * ```\n *\n * #### How It Works\n *\n * Under the hood, the plugin transforms Solidity imports into JavaScript modules.\n * For example, importing ERC20.sol generates a module with code like:\n *\n * ```typescript\n * import { createContract } from '@tevm/contract'\n *\n * export const ERC20 = createContract({\n *   name: 'ERC20',\n *   humanReadableAbi: [\n *     'function name() view returns (string)',\n *     'function symbol() view returns (string)',\n *     'function totalSupply() view returns (uint256)',\n *     'function balanceOf(address) view returns (uint256)',\n *     // ... other functions\n *   ],\n *   bytecode: '0x...',\n *   deployedBytecode: '0x...',\n * })\n * ```\n *\n * #### Custom Configuration\n *\n * For custom configuration of the Tevm compiler, add a `tevm.config.json` file to your project root:\n *\n * ```json\n * {\n *   \"foundryProject\": true,       // Is this a Foundry project?\n *   \"libs\": [\"lib\"],              // Library directories to search in\n *   \"remappings\": {               // Import remappings (like in Foundry)\n *     \"foo\": \"vendored/foo\"\n *   },\n *   \"debug\": true,                // Enable debug logging\n *   \"cacheDir\": \".tevm\"           // Cache directory for compiled contracts\n * }\n * ```\n *\n * @see {@link https://tevm.sh/learn/solidity-imports | Tevm Solidity Import Documentation}\n * @see {@link https://www.rspack.dev/api/plugin | Rspack Plugin API}\n */\nexport const rspackPluginTevm = createUnplugin(tevmUnplugin).rspack\n"]}