{"version":3,"sources":["../src/createJsonRpcFetcher.js"],"names":[],"mappings":";;;;;;;;AAkBO,IAAM,oBAAA,GAAuB,CAAC,MAAA,KAAW;AAC/C,EAAA,OAAO;AAAA,IACN,OAAA,EAAS,OAAO,OAAA,KAAY;AAC3B,MAAA,IAAI;AACH,QAAA,MAAM,MAAA,GAAS,MAAM,MAAA,CAAO,OAAA,CAAQ,OAAO,CAAA;AAC3C,QAAA,OAAO;AAAA,UACN,OAAA,EAAS,KAAA;AAAA,UACT,MAAA;AAAA,UACA,QAAQ,OAAA,CAAQ,MAAA;AAAA,UAChB,GAAI,QAAQ,MAAA,KAAW,KAAA,CAAA,GAAY,EAAE,MAAA,EAAQ,OAAA,CAAQ,MAAA,EAAO,GAAI,EAAC;AAAA,UACjE,GAAI,QAAQ,EAAA,KAAO,KAAA,CAAA,GAAY,EAAE,EAAA,EAAI,OAAA,CAAQ,EAAA,EAAG,GAAI;AAAC,SACtD;AAAA,MACD,SAAS,CAAA,EAAG;AACX,QAAA,IAAI,OAAO,CAAA,KAAM,QAAA,IAAY,CAAA,KAAM,IAAA,IAAQ,UAAU,CAAA,EAAG;AACvD,UAAA,OAAO;AAAA,YACN,OAAA,EAAS,KAAA;AAAA,YACT,KAAA,EAAO;AAAA,cACN,IAAA;AAAA;AAAA,gBAA4B,CAAA,CAAE;AAAA,eAAA;AAAA,cAC9B,SAAS,SAAA,IAAa,CAAA;AAAA;AAAA,gBAA0B,CAAA,CAAE;AAAA,kBAAW;AAAA,aAC9D;AAAA,YACA,QAAQ,OAAA,CAAQ,MAAA;AAAA,YAChB,GAAI,QAAQ,MAAA,KAAW,MAAA,GAAY,EAAE,MAAA,EAAQ,OAAA,CAAQ,MAAA,EAAO,GAAI,EAAC;AAAA,YACjE,GAAI,QAAQ,EAAA,KAAO,MAAA,GAAY,EAAE,EAAA,EAAI,OAAA,CAAQ,EAAA,EAAG,GAAI;AAAC,WACtD;AAAA,QACD;AACA,QAAA,OAAO;AAAA,UACN,OAAA,EAAS,KAAA;AAAA,UACT,KAAA,EAAO;AAAA,YACN,IAAA,EAAM,KAAA;AAAA,YACN,OAAA,EAAS;AAAA,WACV;AAAA,UACA,QAAQ,OAAA,CAAQ,MAAA;AAAA,UAChB,GAAI,QAAQ,MAAA,KAAW,MAAA,GAAY,EAAE,MAAA,EAAQ,OAAA,CAAQ,MAAA,EAAO,GAAI,EAAC;AAAA,UACjE,GAAI,QAAQ,EAAA,KAAO,MAAA,GAAY,EAAE,EAAA,EAAI,OAAA,CAAQ,EAAA,EAAG,GAAI;AAAC,SACtD;AAAA,MACD;AAAA,IACD;AAAA,GACD;AACD","file":"index.cjs","sourcesContent":["/**\n * @deprecated\n * Makes a JSON-RPC request to a url\n * Returns the entire JSON-RPC response rather than throwing and only returning result\n * Used currently as an adapter to avoid refactoring existing code\n * @see https://ethereum.org/en/developers/docs/apis/json-rpc/\n * @param {{request: import('viem').EIP1193RequestFn}} client\n * @returns {import(\"./JsonRpcClient.js\").JsonRpcClient} the `result` field from the JSON-RPC response\n * @example\n * ```typescript\n * const url = 'https://mainnet.optimism.io'\n * const params = {\n *   method: 'eth_getBlockByNumber',\n *   params: ['latest', false],\n * }\n * const {result: block} = await fetchJsonRpc(url, params)\n * ```\n */\nexport const createJsonRpcFetcher = (client) => {\n\treturn {\n\t\trequest: async (request) => {\n\t\t\ttry {\n\t\t\t\tconst result = await client.request(request)\n\t\t\t\treturn {\n\t\t\t\t\tjsonrpc: '2.0',\n\t\t\t\t\tresult,\n\t\t\t\t\tmethod: request.method,\n\t\t\t\t\t...(request.params !== undefined ? { params: request.params } : {}),\n\t\t\t\t\t...(request.id !== undefined ? { id: request.id } : {}),\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tif (typeof e === 'object' && e !== null && 'code' in e) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tjsonrpc: '2.0',\n\t\t\t\t\t\terror: {\n\t\t\t\t\t\t\tcode: /** @type {string}*/ (e.code),\n\t\t\t\t\t\t\tmessage: 'message' in e ? /** @type {string}*/ (e.message) : 'Unknown error in jsonrpc request',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tmethod: request.method,\n\t\t\t\t\t\t...(request.params !== undefined ? { params: request.params } : {}),\n\t\t\t\t\t\t...(request.id !== undefined ? { id: request.id } : {}),\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\tjsonrpc: '2.0',\n\t\t\t\t\terror: {\n\t\t\t\t\t\tcode: -32000,\n\t\t\t\t\t\tmessage: 'Unknown error in jsonrpc request',\n\t\t\t\t\t},\n\t\t\t\t\tmethod: request.method,\n\t\t\t\t\t...(request.params !== undefined ? { params: request.params } : {}),\n\t\t\t\t\t...(request.id !== undefined ? { id: request.id } : {}),\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t}\n}\n"]}